<div class="flex flex-col min-h-screen bg-gray-50 text-gray-900">
  <main class="flex-1 container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto space-y-8">
      <div class="flex flex-col items-center text-gray-500 gap-6">
        <img [src]="user.avatarUrl" [alt]="user.name" class="h-24 w-24 border-4 border-cyan-400 rounded-full" />

          <div class="flex-1 text-center sm:text-left">
          <h1 class="text-4xl font-bold font-headline text-black font-serif">{{ user.name }}</h1>
          <!--<p class="text-muted-foreground flex items-center justify-center sm:justify-start gap-2 mt-1">
            <i class="bx bx-at h-4 w-4"></i> {{ user.email }}
          </p>
          <p class="text-muted-foreground flex items-center justify-center sm:justify-start gap-2">
            <i class="bx bx-map h-4 w-4"></i> {{ user.location }}
          </p> -->
        </div>

        <!-- <button class="btn bg-blue-400 hover:bg-cyan-400 rounded-lg px-2.5 h-8 text-cyan-50 cursor-pointer" (click)="openEditDialog()">
          <i class="bx bx-edit mr-2 h-4 w-4"></i>
          {{ translations.editProfile }}
        </button> -->
      </div>

      <!-- <div (close)="closeEditDialog()">
        <app-profile-form [user]="user" (save)="handleProfileUpdate($event)" />
      </div> -->

      <div class="bg-neutral-100 flex flex-col rounded-lg border border-gray-500 p-5 m-3.5 gap-3.5">
        <div>
          <div class="flex flex-row justify-between">
            <h2 class="font-bold text-2xl">About Me</h2>
            <button (click)="onEditAbout()" class="bg-amber-500 hover:bg-amber-300 cursor-pointer rounded-full items-center">
              <i class="bx bx-pencil text-2xl text-white font-extrabold p-2"></i>
            </button>
          </div>
          <div class="border border-gray-400 rounded-lg p-2 px-2 py-2 my-1.5">
            <textarea rows="5" [disabled]="!editingAbout">|...this is me!</textarea>
          </div>
        </div>
      </div>

      <div class="bg-neutral-100 flex flex-col rounded-lg border border-gray-500 p-5 m-3.5 gap-3.5">
        
        <div class="flex flex-row justify-between">
          <h2 class="font-bold text-2xl">Personal Details</h2>
          <button (click)="onEditDetails()" class="bg-amber-500 hover:bg-amber-400 cursor-pointer items-center rounded-full">
            <i class="bx bx-pencil text-white text-2xl p-2 font-extrabold"></i>
          </button>
        </div>

        <ng-container *ngIf="editingDetails; else viewDetails">
          <app-registration-form></app-registration-form>
        </ng-container>

        <ng-template #viewDetails>
          <div *ngIf="submittedData" class="bg-white rounded-lg border border-gray-300 p-4 mt-6 space-y-2">
            <h3 class="text-lg font-semibold text-gray-700">ðŸ‘¤ Personal Details</h3>
            <p><strong>Full Names:</strong> {{ submittedData.full_names }}</p>
            <p><strong>Email:</strong> {{ submittedData.email }}</p>
            <p><strong>Contact:</strong> {{ submittedData.code }} {{ submittedData.cell }}</p>
            <p><strong>Date of Birth:</strong> {{ submittedData.date_of_birth | date }}</p>
            <p><strong>Sex:</strong> {{ submittedData.sex }}</p>
            <p><strong>Ethnicity:</strong> {{ submittedData.ethnicity }}</p>
            <p><strong>Home Language:</strong> {{ submittedData.home_language }}</p>
            <p><strong>Current Location:</strong> {{ submittedData.location }}</p>
            <p><strong>Driver's License:</strong> {{ submittedData.driver_license ? 'Yes' : 'No' }}</p>
            <p><strong>Living with Disabilities:</strong> {{ submittedData.has_disability ? 'Yes' : 'No' }}</p>
            <p *ngIf="submittedData.has_disability"><strong>Disability Details:</strong> {{ disability }}</p>
          </div>

        </ng-template>
      </div>

      <div class="bg-neutral-100 flex flex-col rounded-lg border border-gray-500 p-5 m-3.5 gap-3.5">
        <div class="flex flex-row justify-between">
          <h2 class="text-2xl font-bold">Education</h2>
          <button (click)="onAddEducation()" class="bg-amber-500 hover:bg-amber-300 cursor-pointer rounded-full items-center">
            <i class="bx bx-plus text-2xl text-white font-extrabold p-2"></i>
          </button>
        </div>
        
        <ng-container *ngIf="addingEducation">
          <app-education-form [userId]="user_id"></app-education-form>
        </ng-container>

        <div *ngFor="let dummyEducation of qualifications; let i = index" class="bg-white rounded-lg border border-gray-300 p-4 mt-6 space-y-2">
            <h3 class="text-lg font-semibold text-gray-700">ðŸ“˜ Education {{ i + 1 }}</h3>
            <p><strong>Institution:</strong> {{ dummyEducation.institution }}</p>
            <p><strong>Qualification:</strong> {{ dummyEducation.qualification }}</p>
            <p><strong>Start Date:</strong> {{ dummyEducation.start_date | date }}</p>
            <p><strong>Completion Date:</strong> {{ dummyEducation.completion_date | date }}</p>
            <p><strong>Academic Average:</strong> {{ dummyEducation.average }}%</p>
          </div>
    </div>

      <div class="bg-neutral-100 flex flex-col rounded-lg border border-gray-500 p-5 m-3.5 gap-3.5">
        <div class="flex flex-row justify-between">
          <h2 class="text-2xl font-bold">My Skills</h2>
          <button class="bg-amber-500 hover:bg-amber-300 cursor-pointer rounded-full items-center" (click)="onAddSkills()">
            <i class="bx bx-plus text-2xl text-white font-extrabold p-2"></i>
          </button>
        </div>

        <!--When the edit is initiated-->
        <ng-container *ngIf="addingSkills">
          <div class="flex flex-row gap-2.5">
            <input type="text" formControlName="skillForm" class="h-8 bg-gray-200 p-2 w-md rounded-lg" placeholder="Enter skill"/>
            <button (click)="onEnterSkill()" [disabled]="!skillForm.valid" class="bg-blue-500 hover:bg-blue-400 cursor-pointer items-center rounded-lg w-24 text-gray-100">
              Enter
            </button>
          </div>
        </ng-container>

        <div>
          <div class="flex flex-wrap gap-2">
            <span *ngFor="let skill of user.skills" class="rounded-lg bg-gray-300 text-base px-3 py-1">
              {{ skillDisplay[skill] || skill }}
            </span>
          </div>
        </div>
    </div>

      <div class="bg-neutral-100 flex flex-col rounded-lg border border-gray-500 p-5 m-3.5 gap-3.5">
        <div class="flex flex-row justify-between">
          <div class="flex items-center gap-2 text-2xl font-bold">
            <i class="bx bx-bookmarks h-5 w-5 text-accent"></i>
            {{ translations.myInterests }}
          </div>
          <button class="bg-amber-500 hover:bg-amber-300 cursor-pointer rounded-full items-center" (click)="onAddInterests()">
            <i class="bx bx-plus text-2xl font-extrabold text-white p-2"></i>
          </button>

        </div>

        <!--When the edit is initiated-->
        <ng-container *ngIf="addingInterests">
          <div class="flex flex-row gap-2.5">
            <input type="text" formControlName="interestForm" class="h-8 bg-gray-200 p-2 w-md rounded-lg" placeholder="Interest | hobby | activities"/>
            <button (click)="onAddInterests()" [disabled]="!interestForm.valid" class="bg-blue-500 hover:bg-blue-400 cursor-pointer items-center rounded-lg w-24 text-gray-100">
              Enter
            </button>
          </div>
        </ng-container>

        <div>
          <div class="flex flex-wrap gap-2">
            <span *ngFor="let interest of user.interests" class="rounded-lg bg-gray-300 text-base px-3 py-1">
              {{ interest }}
            </span>
          </div>
        </div>
    </div>
    </div>
  </main>
</div>
